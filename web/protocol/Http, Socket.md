# HTTP 와 Socket

## HTTP (Hyper Text Transfer Protocol)

-  WWW (World Wide Web) 상에서 정보를 주고받을 수 있는 프로토콜이다. 주로 HTML 문서를 주고받는 데에 쓰인다. TCP와 UDP를 사용하며, 80번 포트를 사용한다.

```
서버와 클라이언트 통신(request <-> response)간에 사용됨
header와 body로 나뉨 header에는 요청에대한 정보(캐시 설정, 쿠키, 서버 정보, 호스트 정보, 에이전트 정보)가 담겨있고 body에는 실질적인 데이터가 담겨있다.
HTTP 메세지는 ASCII로 인코딩된 텍스트 정보로 구성되며, 여러 줄에 걸쳐 만들어진다. HTTP/1.1 과 초기 버전에서는 이 메세지들을 연결을 통해 직접 전달되었습니다. HTTP/2 에서는 최적화와 더 나은 성능을 이끌어낼 수 있도록 인간이 읽을 수 있는 메세지를 HTTP 프레임으로 나누었다.
```

### HTTP 메소드의 종류
```
OPTIONS : 요청 URI에서 사용할 수 있는 Method를 물어본다.
GET : 요청 URI의 정보를 가져온다.
HEAD : GET 요청에서 body는 제외하고 헤더만 가져온다.
POST : 요청 URI의 리소스의 새로운 정보를 보낸다.
PUT : 요청 URI에 저장될 정보를 보낸다.
DELETE : 요청 URI의 리소스를 삭제한다.
TRACE : 보낸 메시지를 다시 돌려보낸다.
CONNECT : 프록시에 사용하기 위해 예약된 메서드이다.
```

### HTTP의 장점

```
1. 직관적으로 이해하기가 쉽고 구현이 단순하다.
2. 네트워크 자원의 효율성이 증가한다.
3. 동시에 보다 많은 클라이언트의 요청을 처리
```

### HTTP의 단점

```
1. 수행속도의 감소 - 매 요청마다 새로운 연결을 해야하기 때문에 서버측의 네트워크 자원의 낭비를 줄이는 대신 요청을 열어야하는 오버헤드가 있다.
2. stateless 하다.
* 단점을 보완하기 위해 쿠키, 세션을 활용한다.

@ 쿠키
서버에서 response 헤더에 쿠키값을 인입하여 클라이언트가 다시 요청을 보낼 때 쿠키를 활용한다. 쿠키를 설정하면 브라우저가 요청을 보낼 때 쿠키를 헤더에 자동으로 넣어서 보내줌으로써 접속을 유지할 수 있다.

@ 세션
세션은 서버 메모리에 저장하는 방식인데, 서버가 클라이언트의 세션 ID를 기억하고 response 헤더에 쿠키값으로 세션 ID를 넣어서 보내면 해당 클라이언트는 세션 ID로 접속을 유지할 수 있다.
```

### HTTP/1.1의 단점
```
1. 본문과 달리 헤더는 압축이 되지않는다.
2. 헤더는 매 request마다 유사하기 마련인데 그것들이 반복되어 전송된다.
3. 다중 접속이 불가능합니다. 여러 연결을 서버에서 동시에 열어야한다. 활발한 TCP 연결이 한가한 TCP 연결보다 휴율적이다.
```

### HTTP/2
```
HTTP1/1의 반복되는 헤더 전송 및 압축 하지 않는 단점을 해결하기 위해 HTTP/2 에서는 HTTP 메세지를 스트림에 포함된 프레임으로 나누어 데이터와 헤더 프레임이 구별되어 헤더 압축이 가능합니다. 또한 몇 개의 스트림들이 함께 묶일 수 있으며, 그러한 처리 과정을 멀티플렉싱이라고 하는데 내재된 TCP 연결을 효율적으로 사용함
HTTP1/1에서는 데이터를 플레인텍스트로 전송했지만 HTTP/2에서는 바이너리 데이터로 전송함.
```

---
## Web Socket

### 등장배경
```
HTTP의 클라이언트<->서버간 접속을 유지하지 않는 단점을 보완하기 위해 나왔다. HTTP는 한 번에 한 방향으로만 통신(half-duplex)을 하는데 점차 클라이언트와 서버가 주고받는 정보양이 많아지면서 half-duplex로는 성능상에 문제가 발생하게됨 또한 HTTP는 지나치게 많은 헤더를 가지고있다.
```
### 정의
```
WebSocket 프로토콜은 서버와 클라이언트간 신속하고 보안이 유지되는 양방향 통신을 위한 매커니즘이다.
WebSocket은 실시간 게임, 인스턴스 소셜 네트워크 알림, 주식 또는 날짜 정보의 최신 디스플레이 등의 안전하고 빠른 데이터 전송이 필요한 앱에 사용된다.
WebSocket 연결 설절을 하기 위해서는 HTTP 기반의 핸드셰이크가 사용된다.
연결이 설정되어지면 이전에 사용한 TCP 연결을 사용하여 응용 프로그램 계층의 프로토콜이 HTTP에서 WebSocket으로 변화되어 HTTP는 무시되고 WebSocket 연결이 끊길 때까지 두 끝점에서 소켓 프로토콜을 이용하여 데이터를 주고 받을 수 있다.
WebSocket을 사용하면 더 이상 Active X를 사용하지 않고도 TCP/IP 소켓통신을 구현할 수 있다. 또한 네트워크 과부하를 줄이고 애플리케이션 반응성을 높일 수 있다. 또한 헤더의 크기를 수 Byte 수준으로 줄일 수 있다. HTTP가 적합하지않은 메세징, 트랙잭션 및 애플리케이션 특성상 트래픽이 높로 낮은 지연 시간을 가진 환경에서 적합하다.
```
---