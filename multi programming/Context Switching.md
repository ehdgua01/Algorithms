# Context Switching
```
- CPU 하나가 스레드 두개를 동시에 실행할 수는 없지만(single core CPU) 교대로 실행하는 일은 가능하다(CPU 스케쥴링). 교대로 실행하는 간격이 충분히 짧다면 사용자는 두 스레드가 동시에 실행되는 것처럼 느낀다.(멀티 프로그래밍 -> CPU를 효율적으로 사용하기 위해서) 이렇게 하려면 각 스레드의 최종 실행 상태를 저장하고 나중에 복원하는 작업을 반복해야 한다. 스레드의 실행 상태란 CPU의 메모리 상태를 말하며, 구체적으로 CPU레지스터 값과 메모리의 스택을 의미한다. 하드웨어(CPU)와 소프트웨어(운영체제)의 협동으로 이루어지는 스레드 실행 상태의 저장과 복원 작업을 컨텍스트 전환(context switch)이라 일컬으며, 이 덕분에 각 스레드는 다른 스레드의 존재와 무관하게 상태를 유지하면서 실행할 수 있다.
- 멀티프로세스 환경에서 CPU가 어떤 하나의 프로세스를 실행하고 있는 상태에서 인터럽트 요청에 의해 다운 우선순위의 프로세스를 실행시켜야 할 때 기존의 프로세스의 상태를 저장하고 CPU가 다음 프로세스를 수행하도록 새로운 프로세스의 상태 또는 레지스터 값(Context)를 교체하는 작업
- Context Switching이 자주 일어나게 되면 오버헤드가 발생해 효율이 떨어진다.
```

### Context ?
```
- CPU가 해당 프로세스를 실행하기 위한 해당 프로세스의 정보들이다.
- Context는 프로세스의 PCB(Process Control Block)에 저장된다.
```

### PCB의 저장 정보
```
- 프로세스마다 변하는 모든 정보에 대한 저장소의 역할을 한다.
- 프로세스 상태 : 생성(new), 준비(ready), 수행(running), 대기(waiting), 중지(halted)
- 프로그램 카운터 : 이 프로세스가 다음에 실행할 명령어의 주소를 가리킨다.
- CPU 레지스터 : 컴퓨터 구조에 따라 다양한 개수와 유형을 가진다. 레지스터에는 누산기, 색인 레지스터, 스택 레지스터, 범용 레지스터들과 상태 코드 정보가 포함된다. 프로그램 카운터와 함께 이 상태정보는 나중에 프로세스가 계속 올바르게 수행되도록 하기 위해서 , 인터럽트 발생시 저장되어야 한다.
- CPU스케줄링 정보 : 프로세스 우선순위, 스케줄 큐에 대한 포인터와 다른 스케줄 매개변수를 포함한다.
- 메모리 관리 정보 : 운영체제에 의해 사용되는 메모리 시스템에 따라 베이스레지스터와 한계 레지스터의 값, 운영체제가 사용하는 메모리 시스템에 따라 페이지 테이블 또는 세그먼트 테이블 등과 같은 정보를
포함한다.
- 프로세스 번호
```